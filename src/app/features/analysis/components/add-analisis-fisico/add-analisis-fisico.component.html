<div class="bg-white rounded-lg shadow-xl w-full overflow-visible" (click)="$event.stopPropagation()">
  <!-- HEADER -->
  <div class="flex justify-between items-center px-6 py-4 border-b">
    <h2 class="text-lg font-semibold">
      {{ mode }} Análisis Físico — {{ targetType }} {{ targetId }}
    </h2>
  </div>

  <!-- FORMULARIO -->
  <form class="grid grid-cols-5 gap-4 p-6">
    <!-- Fila 1 -->
    <div>
      <label class="block text-sm font-medium mb-1">Peso Muestra (g)</label>
      <input type="number" [(ngModel)]="form.peso_muestra" name="peso_muestra" class="w-full border rounded px-3 py-2"
        (ngModelChange)="persist()" />
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">Peso Pergamino (g)</label>
      <input type="number" [(ngModel)]="form.peso_pergamino" name="peso_pergamino"
        class="w-full border rounded px-3 py-2" (ngModelChange)="persist()" />
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">WA (%)</label>
      <input type="number" [(ngModel)]="form.wa" name="wa" class="w-full border rounded px-3 py-2"
        (ngModelChange)="persist()" />
    </div>

    <!-- Fila 2 -->
    <div>
      <label class="block text-sm font-medium mb-1">Temp. WA (°C)</label>
      <input type="number" [(ngModel)]="form.temperatura_wa" name="temperatura_wa"
        class="w-full border rounded px-3 py-2" (ngModelChange)="persist()" />
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">Humedad (%)</label>
      <input type="number" [(ngModel)]="form.humedad" name="humedad" class="w-full border rounded px-3 py-2"
        (ngModelChange)="persist()" />
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">Temp. Humedad (°C)</label>
      <input type="number" [(ngModel)]="form.temperatura_humedad" name="temperatura_humedad"
        class="w-full border rounded px-3 py-2" (ngModelChange)="persist()" />
    </div>

    <!-- Fila 3 -->
    <div>
      <label class="block text-sm font-medium mb-1">Densidad (g/L)</label>
      <input type="number" [(ngModel)]="form.densidad" name="densidad" class="w-full border rounded px-3 py-2"
        (ngModelChange)="persist()" />
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">Color Grano Verde</label>
      <select [(ngModel)]="form.color_grano_verde" name="color_grano_verde" class="w-full border rounded px-3 py-2"
        (ngModelChange)="persist()">
        <option value="" disabled selected>Selecciona un color</option>
        <option *ngFor="let color of colorGranoOptions" [value]="color">
          {{ color }}
        </option>
      </select>
    </div>

    <div>
      <label class="block text-sm font-medium mb-1">Olor</label>
      <select [(ngModel)]="form.olor" name="olor" class="w-full border rounded px-3 py-2" (ngModelChange)="persist()">
        <option value="" disabled selected>Selecciona un olor</option>
        <option *ngFor="let o of olorOptions" [value]="o">
          {{ o }}
        </option>
      </select>
    </div>

    <!-- Fila 4 -->
    <div>
      <label class="block text-sm font-medium mb-1">Malla >18</label>
      <input type="number" [(ngModel)]="form.superior_malla_18" name="superior_malla_18"
        class="w-full border rounded px-3 py-2" (ngModelChange)="persist()" />
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">Malla >16</label>
      <input type="number" [(ngModel)]="form.superior_malla_16" name="superior_malla_16"
        class="w-full border rounded px-3 py-2" (ngModelChange)="persist()" />
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">Malla >14</label>
      <input type="number" [(ngModel)]="form.superior_malla_14" name="superior_malla_14"
        class="w-full border rounded px-3 py-2" (ngModelChange)="persist()" />
    </div>

    <!-- Fila 5 -->
    <div>
      <label class="block text-sm font-medium mb-1">Malla &lt;16</label>
      <input type="number" [(ngModel)]="form.menor_malla_16" name="menor_malla_16"
        class="w-full border rounded px-3 py-2" (ngModelChange)="persist()" />
    </div>

    <div>
      <label class="block text-sm font-medium mb-1">Peso Defectos (g)</label>
      <input type="number" [(ngModel)]="form.peso_defectos" name="peso_defectos" class="w-full border rounded px-3 py-2"
        (ngModelChange)="persist()" />
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">Quaquers</label>
      <input type="number" [(ngModel)]="form.quaquers" name="quaquers" class="w-full border rounded px-3 py-2"
        (ngModelChange)="persist()" />
    </div>

    <!-- Fila 6 -->
    <div>
      <label class="block text-sm font-medium mb-1">Peso Muestra Tostada (g)</label>
      <input type="number" [(ngModel)]="form.peso_muestra_tostada" name="peso_muestra_tostada"
        class="w-full border rounded px-3 py-2" (ngModelChange)="persist()" />
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">Desarrollo (%)</label>
      <input type="number" [(ngModel)]="form.desarrollo" name="desarrollo" class="w-full border rounded px-3 py-2"
        (ngModelChange)="persist()" />
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">% Caramelización</label>
      <input type="number" [(ngModel)]="form.porcentaje_caramelizacion" name="pocentaje_caramelizcacion"
        class="w-full border rounded px-3 py-2" (ngModelChange)="persist()" />
    </div>

    <!-- Fila 7 -->
    <div>
      <label class="block text-sm font-medium mb-1">C. Desarrollo</label>
      <input type="number" [(ngModel)]="form.c_desarrollo" name="c_desarrollo" class="w-full border rounded px-3 py-2"
        (ngModelChange)="persist()" />
    </div>
    


    <div class="col-span-5">
      <label class="block text-sm font-medium mb-1">Comentario</label>
      <textarea [(ngModel)]="form.comentario" name="comentario" class="w-full border rounded px-3 py-2" rows="3"
        (ngModelChange)="persist()"></textarea>
    </div>

  </form>



</div>