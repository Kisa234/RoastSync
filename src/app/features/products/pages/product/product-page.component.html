<div class="h-full p-6 bg-[#F9F9F9] overflow-auto">

  <!-- Header -->
  <div class="flex justify-between items-center mb-5">
    <div>
      <h1 class="text-2xl font-bold text-[#1F1F1F]">Inventario de Productos</h1>
      <p class="text-gray-600">Visualiza el stock total de productos y sus categorías</p>
    </div>

    <div class="flex space-x-3">
      <!-- Botón Productos -->
      <button
        class="flex items-center bg-[#B8672E] text-white px-4 py-2 rounded shadow hover:bg-[#A67C52] transition"
        (click)="openProductos()"
      >
        <lucide-icon [img]="Eye" class="w-5 h-5 mr-2" />
        Ver Productos
      </button>

      <!-- Botón Categorías -->
      <button
        class="flex items-center bg-[#F4F4F4] text-[#1F1F1F] px-4 py-2 rounded shadow hover:bg-[#E5E5E5] transition"
        (click)="openCategorias()"
      >
        <lucide-icon [img]="Eye" class="w-5 h-5 mr-2" />
        Ver Categorías
      </button>
    </div>
  </div>

  <!-- Contenedor principal -->
  <div class="bg-white rounded-lg border border-[#E5E5E5] shadow-sm p-6 space-y-6">

    <!-- Filtros -->
    <div class="flex justify-between items-center mb-3">
      <h2 class="text-xl font-semibold text-[#1F1F1F]">Resumen de Inventario</h2>

      <select
        [(ngModel)]="selectedCategoria"
        (change)="filterByCategoria()"
        class="border border-[#E5E5E5] rounded px-3 py-2 text-sm text-gray-700 focus:outline-none"
      >
        <option value="">Todas las categorías</option>
        <option *ngFor="let c of categorias" [value]="c.id_categoria">
          {{ c.nombre }}
        </option>
      </select>
    </div>

    <!-- Tabla de Inventario -->
    <div class="overflow-x-auto m-1 rounded-lg shadow-sm">
      <table class="min-w-full table-auto divide-y divide-[#E5E5E5]">
        <thead class="bg-[#F9F9F9]">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Producto</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Cantidad</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Lote Tostado</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Molienda</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Gramaje</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-[#E5E5E5]">
          <tr *ngFor="let i of inventarios" class="hover:bg-[#F9F9F9]">
            <td class="px-6 py-4 text-sm text-gray-700">{{ i.id_producto | productoNombre}}</td>
            <td class="px-6 py-4 text-sm text-gray-700">{{ i.cantidad }}</td>
            <td class="px-6 py-4 text-sm text-gray-700">{{ i.id_lote_tostado }}</td>
            <td class="px-6 py-4 text-sm text-gray-700">{{ i.molienda }}</td>
            <td class="px-6 py-4 text-sm text-gray-700">{{ i.gramaje }} Gr.</td>
          </tr>
          <tr *ngIf="inventarios.length === 0">
            <td colspan="6" class="px-6 py-6 text-center text-gray-500">
              No hay inventarios registrados.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Modales -->
<productos
  *ngIf="showProductos"
  (closes)="closeProductos()"
></productos>

<categorias
  *ngIf="showCategorias"
  (closes)="closeCategorias()"
></categorias>
