<div class="fixed inset-0 bg-opacity-50 backdrop-blur-md flex items-center justify-center z-50 p-4">
  <div class="bg-white rounded-lg shadow-lg w-full max-w-3xl overflow-hidden">

    <!-- Header -->
    <div class="flex justify-between items-center border-b border-[#E5E5E5] px-6 py-4">
      <h2 class="text-xl font-semibold text-[#1F1F1F]">Lista de Productos</h2>
      <button
        (click)="close()"
        class="text-gray-500 hover:text-gray-700 transition text-lg font-semibold"
      >
        ✕
      </button>
    </div>

    <!-- Contenido -->
    <div class="p-6 space-y-4">
      <!-- Encabezado interno -->
      <div class="flex justify-between items-center">
        <h3 class="text-lg font-medium text-[#1F1F1F]">Productos Registrados</h3>
        <button
          class="flex items-center bg-[#B8672E] text-white px-4 py-2 rounded shadow hover:bg-[#A67C52] transition"
          (click)="openAddProduct()"
        >
          <lucide-icon [img]="Plus" class="w-5 h-5 mr-2" />
          Agregar Producto
        </button>
      </div>

      <!-- Tabla -->
      <div class="overflow-x-auto m-1 rounded-lg border border-[#E5E5E5] shadow-sm">
        <table class="min-w-full table-auto divide-y divide-[#E5E5E5]">
          <thead class="bg-[#F9F9F9]">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Código</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Nombre</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Categoría</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Descripción</th>
              <th class="px-6 py-3 text-center text-xs font-medium text-gray-600 uppercase">Acciones</th>
            </tr>
          </thead>

          <tbody class="bg-white divide-y divide-[#E5E5E5]">
            <tr
              *ngFor="let p of productos"
              class="hover:bg-[#F9F9F9] transition"
            >
              <td class="px-6 py-4 text-sm text-gray-700 font-medium">{{ p.id_producto }}</td>
              <td class="px-6 py-4 text-sm text-gray-700">{{ p.nombre }}</td>
              <td class="px-6 py-4 text-sm text-gray-700">{{ p.id_categoria | categoriaNombre }}</td>
              <td class="px-6 py-4 text-sm text-gray-700">{{ p.descripcion || '-' }}</td>

              <td class="px-6 py-4 text-center">
                <div class="flex justify-center space-x-3">
                  <button
                    (click)="openEdit(p)"
                    class="text-[#B8672E] hover:text-[#A05622] transition"
                  >
                    <lucide-icon [img]="Edit" class="w-5 h-5" />
                  </button>
                  <button
                    (click)="openDelete(p)"
                    class="text-red-500 hover:text-red-600 transition"
                  >
                    <lucide-icon [img]="Trash2" class="w-5 h-5" />
                  </button>
                </div>
              </td>
            </tr>

            <tr *ngIf="productos.length === 0">
              <td colspan="5" class="px-6 py-6 text-center text-gray-500">
                No hay productos registrados.
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Footer -->
    <div class="border-t border-[#E5E5E5] px-6 py-4 flex justify-end">
      <button
        (click)="close()"
        class="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition"
      >
        Cerrar
      </button>
    </div>
  </div>
</div>

<!-- Modales hijos -->
<add-product
  *ngIf="showAdd"
  (closes)="closeChildModals()"
  (saved)="reloadProductos()"
></add-product>

<edit-product
  *ngIf="showEdit"
  [producto]="selectedProducto!"
  (closes)="closeChildModals()"
  (updated)="reloadProductos()"
></edit-product>