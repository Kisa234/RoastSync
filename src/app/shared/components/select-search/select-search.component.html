<div class="relative w-full" tabindex="0">
  <div class="w-full flex border border-[#E5E5E5] rounded-lg px-3 py-2 placeholder-gray-400
           focus:border-[#B8672E] focus:ring-2 focus:ring-[#B8672E] focus:outline-none transition" (click)="toggle()">
    <span class="flex-1 truncate" [ngClass]="displayValue === placeholder ? 'text-gray-400' : 'text-black'">
    {{displayValue }}</span>
    <lucide-icon [img]="ChevronDown" class="w-4 h-4 text-gray-400" />
  </div>
  <div *ngIf="open" class="absolute w-full max-h-40 overflow-y-auto bg-white 
            border border-[#E5E5E5] rounded mt-1 shadow-lg z-20">
    <input [(ngModel)]="search" (ngModelChange)="filter()" [ngModelOptions]="{ standalone: true }" name="search"
      class="w-full px-3 py-2 border-b placeholder-gray-700" placeholder="Buscar..." />
    <ul>
      <li *ngFor="let item of filtered" (click)="select(item)" [class.font-semibold]="isSelected(item)"
        class="px-3 py-2 hover:bg-gray-100 cursor-pointer text-gray-700">
        {{ item[displayField] }}
      </li>
      <li *ngIf="filtered.length === 0" class="px-3 py-2 text-gray-500">
        No se encontraron resultados.
      </li>
      <li *ngIf="filtered.length === 0 && multiple" class="px-3 py-2 hover:bg-gray-100 cursor-pointer text-blue-600"
        (click)="addNew()">
        Agregar “{{ search }}”
      </li>
    </ul>
  </div>

</div>